---
id: custom-config
title: Custom Config
slug: custom-config
order: 1
---

## Register Custom Preferences

There are two main ways to register frequently-used custom configurations:

1. Register on the integration side via module contribution points
2. Register via the extension's `Configurations` contribution points

OpenSumi provides custom configuration capabilities based on OpenSumi's [Contribution Point](../../develop/basic-design/contribution-point) mechanism, you only need to implement `PreferenceContribution` to register the configuration.

Another way to register is through the extension's [configuration Contribution points](https://code.visualstudio.com/api/references/contribution-points#contributes.configuration) .

## Custom Integration Parameters

When integrating with the OpenSumi framework, we often need to perform independent configuration, and the following is a list of parameters that can be configured during the integration phase by passing in configuration items.

### Browser Configuration

The definition can be found in the `AppConfig` definition in `@opensumi/ide-core-browser`.

| parameter                                 | Parameters instructions                                                                                                                                                                                                                                            | default  value                                                                                                                     |
| --------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| appName                                 | The unique name for a client, usually represent when the client starts up, and also show as the client name output by the extension process                                                                                                                                                                   | OpenSumi                                                                                                                                                                |
| uriScheme                               | Mainly used to register the client protocol in Electron version to promote protocol                                                                                                                                                                                              | sumi                                                                                                                                                                    |
| workspaceDir                            | Workspace path, usually a folder or a workspace file of `*.sumi-workspace`. When the value passed is empty, the file tree on the left side of the editor will show the button to open the folder.                                                                                                                             | Null                                                                                                                                                                    |
| didRendered                             | Call after the DOM has been rendered for the first time. This means that the IDE interface has been rendered and is ready for operation, you can pass in a function here to handle the interface Loading, ref. [DidRendered](https://yuque.antfin.com/ide-framework/integration/features#Zs82P)                                                          | Null                                                                                                                                                                    |
| extensionDir                            | Extension directory path                                                                                                                                                                                                                                              | Null                                                                                                                                                                    |
| extensionCandidate                      | An additional specified extension path, typically for built-inextensions                                                                                                                                                                                                                    | Null                                                                                                                                                                    |
| storageDirName                          | Set the folder name for global storage, mainly for the folder name configuration when using the `Storage` module related storage service                                                                                                                                                                 | .sumi                                                                                                                                                                   |
| preferenceDirName                       | Set the folder name for the workspace profile. For integrated environments, we recommend using `workspacePreferenceDirName` and `userPreferenceDirName` for more fine-grained configuration storage folder name Preference                                                                                                 | .sumi                                                                                                                                                                   |
| workspacePreferenceDirName              | A more fine-grained project workspace configuration storage location, i.e. when preferenceDirName = '.sumi' ， workspacePreferenceDirName = '.kt'，the corresponding global configuration is ~/.sumi/settings.json , the workspace configuration is {workspaceDir}/.kt/settings.json                                                             | .sumi                                                                                                                                                                   |
| userPreferenceDirName                   | A more fine-grained project workspace configuration storage location, i.e. when preferenceDirName = '.sumi' ， userPreferenceDirName = '.kt', the corresponding global configuration is ~/.sumi/settings.json , and the workspace configuration is {userDir}/.kt/settings.json                                                                        | .sumi                                                                                                                                                                   |
| extensionStorageDirName                 | Global extension data storage directory name, default .sumi, storage data location in {userDir}/.sumi                                                                                                                                                                                     | .sumi                                                                                                                                                                   |
| defaultPreferences                      | Initial definition of the overall configuration of the client, common custom parameters including: color theme: `general.theme`, icon theme: `general.icon`, language: `general.language`, exclude file option: `filesExclude`, exclude file listener option: `watchExclude`, etc., which theoretically allows you to set default values for all configurations defined in the IDE| Null                                                                                                                                                                    |
| injector                                | Initialized DI instances, which can be passed in generally after the external DI initialization to facilitate the initialization of some dependencies in advance                                                                                                                                                                        | Null                                                                                                                                                                    |
| wsPath                                  | Default WebScoket communication path                                                                                                                                                                                                                                 | Null                                                                                                                                                                    |
| layoutConfig                            | Define the default modules loaded in each layout block of the IDE, which can add, delete or change target modules.                                                                                                                                                                                             | ref：[default-config.tsx](https://github.com/opensumi/core/blob/58b998d9e1f721928f576579f16ded46b7505e84/packages/main-layout/src/browser/default-config.ts)             |
| layoutConponent                         | Define the overall layout of the IDE, you can pass in a custom layout to define the default size of each block and scaling options, etc.                                                                                                                                                                              | ref：[default-layout.tsx](https://github.com/opensumi/core/blob/58b998d9e1f721928f576579f16ded46b7505e84/packages/core-browser/src/components/layout/default-layout.tsx) |
| panelSizes                              | Panel size, width/height can be defined on the basis of `layoutComponent` configuration                                                                                                                                                                                               | Null                                                                                                                                                                    |
| defaultPanels                           | Define the default panel for each block, for example: `defaultPanels: { [SlotLocation.bottom]: '@opensumi/ide-terminal-next' }`                                                                                                                                                        | Null                                                                                                                                                                    |
| webviewEndpoint                         | The iframe address used to mount the webview                                                                                                                                                                                                                          | `http://${deviceIp}:${port}/webview`                                                                                                                                    |
| extWorkerHost                           | Default startup path of the Worker extension                                                                                                                                                                                                                               | https://dev.g.alicdn.com/tao-ide/ide-lite/${version}/worker-host.js                                                                                                     |
| staticServicePath                       | Define the static resource path. The default load path within the framework is`http://127.0.0.1:8000/assets/${path}`                                                                                                                                                                             | http://127.0.0.1:8000/assets/${path}                                                                                                                                    |
| extensionDevelopmentHost                | Defines whether to start in extension development mode                                                                                                                                                                                                                             | false                                                                                                                                                                   |
| editorBackgroundImage                   | Define the background image of the editor interface                                                                                                                                                                                                                                 |                                                                                                                                                                         |
| useExperimentalShadowDom                | Define whether ShadowDom mode is enabled in the extensiom environment. It is recommended to turn it on.  After enabling ShadowDom mode, the view extension style will be isolated from the global environment                                                                                                                                                             | false                                                                                                                                                                   |
| useIframeWrapWorkerHost                 | Use iframe wrap when loading workerHost. For cross-domain scenarios, the workerHost will be loaded and base64 encoding will be employed and introduced via importScripts (importScripts are not subject to cross-domain restrictions), but this will cause the origin of the workerHost to be null, leaving some requests fail                                               | false                                                                                                                                                                   |
| clientId                                | Custom client id, which is the unique identifier of the websocket service and the unique identifier passed to the backend Service that declares backServices, be careful to keep this id unique                                                                                                                                  | Null                                                                                                                                                                    |
| noExtHost                               | Whether to disable the extension process                                                                                                                                                                                                                                       | false                                                                                                                                                                   |
| extraContextProvider                    | Extra ConfigProvider that allows the ReactDOM.render to call within OpenSumi to be wrapped with a layer of it for additional Context transferring effects                                                                                                                                      | Null                                                                                                                                                                    |
| allowSetDocumentTitleFollowWorkspaceDir | Allow dynamic setting of document#title by workspace path                                                                                                                                                                                                              | true                                                                                                                                                                    |
| remoteHostname                          | Remote access address through which you can access container services                                                                                                                                                                                                               | window.location.hostname                                                                                                                                                |
| enableDebugExtensionHost                | Enable the debugging capability of the extension process                                                                                                                                                                                                                                  | false                                                                                                                                                                   |
| extensionFetchCredentials               | Fetch credentials option when loading extension frontend resources, optionally "include"                                                                                                                                                                                       | "omit"                                                                                                                                                                  | "same-origin" | null |
| extensionConnectOption                  | reference：[ExtensionConnectOption](https://github.com/opensumi/core/blob/58b998d9e1f721928f576579f16ded46b7505e84/packages/core-common/src/types/extension.ts#L18)                                                                                            | Null                                                                                                                                                                    |

### Node Configuration

The definition can be found in the `AppConfig` definition in  `@opensumi/ide-core-node` .

| Parameters                     | Parameter Instructions                                                                                                                                              | Default Value        |
| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- |
| Injector                  | The initialized DI instance can be passed in after DI initialized externally to facilitate dependency initialization in advance                                                                    |               |
| marketplace               | ref：[MarketplaceConfig](https://github.com/opensumi/core/blob/58b998d9e1f721928f576579f16ded46b7505e84/packages/core-node/src/bootstrap/app.ts#L28) |               |
| logLevel                  | Set log placement level. The default is Info level log level                                                                                                                   | LogLevel.Info |
| logDir                    | Define the log placement path                                                                                                                                      | ~/.sumi/logs  |
| LogServiceClass           |  ILogService to be deprecated, set externally, replacing the default logService, which can be done by initializing `ILogService` on the passed `injector`                                   | Null          |
| maxExtProcessCount        | Define the maximum number of extension processes enabled                                                                                                                          | Null          |
| extLogServiceClassPath    | Define a custom implementation path for extension logging                                                                                                                           | Null          |
| processCloseExitThreshold | Define extension process shutdown time                                                                                                                                 | Null          |
| terminalPtyCloseThreshold | Define terminal pty process exit time                                                                                                                           | Null          |
| staticAllowOrigin         | Access origin allowed by static resources                                                                                                                             | Null          |
| staticAllowPath           | Allowed path for accessing static resources. Used to configure the whitelist rule for static resources                                                                                                  | Null          |
| blockPatterns             | Paths to which access is disabled by the file service, using glob to match                                                                                                            | Null          |
| extHost                   | Node extension process entry file                                                                                                                                | Null          |
| extHostIPCSockPath        | The extension process that stores the sock address for communication                                                                                                                    | /tmp          |
| extHostForkOptions        | Extension process fork configuration                                                                                                                                    | Null          |

For more configurations, you may check out the OpenSumi source code.
